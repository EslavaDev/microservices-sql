'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

/**
 * async/add.js
 *
 * @author  Denis Luchkin-Zhou <denis@ricepo.com>
 * @license 2015-16 (C) Ricepo LLC. All Rights Reserved.
 */
const _ = require('lodash');
const Debug = require('debug')('vg:core:add');
const unpromisify = require('./util/unpromisify');

function addAsync() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  const pattern = _.dropRight(args, 1);
  const action = _.last(args);

  Debug(args[0]);

  return this.add.apply(this, _toConsumableArray(pattern).concat([unpromisify(action)]));
}
module.exports = addAsync;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC5qcyJdLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsIkRlYnVnIiwidW5wcm9taXNpZnkiLCJhZGRBc3luYyIsImFyZ3MiLCJwYXR0ZXJuIiwiZHJvcFJpZ2h0IiwiYWN0aW9uIiwibGFzdCIsImFkZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7O0FBTUEsTUFBTUEsSUFBZUMsUUFBUSxRQUFSLENBQXJCO0FBQ0EsTUFBTUMsUUFBZUQsUUFBUSxPQUFSLEVBQWlCLGFBQWpCLENBQXJCO0FBQ0EsTUFBTUUsY0FBZUYsUUFBUSxvQkFBUixDQUFyQjs7QUFJQSxTQUFTRyxRQUFULEdBQTJCO0FBQUEsb0NBQU5DLElBQU07QUFBTkEsUUFBTTtBQUFBOztBQUN6QixRQUFNQyxVQUFVTixFQUFFTyxTQUFGLENBQVlGLElBQVosRUFBa0IsQ0FBbEIsQ0FBaEI7QUFDQSxRQUFNRyxTQUFVUixFQUFFUyxJQUFGLENBQU9KLElBQVAsQ0FBaEI7O0FBRUFILFFBQU1HLEtBQUssQ0FBTCxDQUFOOztBQUVBLFNBQU8sS0FBS0ssR0FBTCxnQ0FBWUosT0FBWixVQUFxQkgsWUFBWUssTUFBWixDQUFyQixHQUFQO0FBQ0Q7QUFDREcsT0FBT0MsT0FBUCxHQUFpQlIsUUFBakIiLCJmaWxlIjoiYWRkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBhc3luYy9hZGQuanNcbiAqXG4gKiBAYXV0aG9yICBEZW5pcyBMdWNoa2luLVpob3UgPGRlbmlzQHJpY2Vwby5jb20+XG4gKiBAbGljZW5zZSAyMDE1LTE2IChDKSBSaWNlcG8gTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICovXG5jb25zdCBfICAgICAgICAgICAgPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IERlYnVnICAgICAgICA9IHJlcXVpcmUoJ2RlYnVnJykoJ3ZnOmNvcmU6YWRkJyk7XG5jb25zdCB1bnByb21pc2lmeSAgPSByZXF1aXJlKCcuL3V0aWwvdW5wcm9taXNpZnknKTtcblxuXG5cbmZ1bmN0aW9uIGFkZEFzeW5jKC4uLmFyZ3MpIHtcbiAgY29uc3QgcGF0dGVybiA9IF8uZHJvcFJpZ2h0KGFyZ3MsIDEpO1xuICBjb25zdCBhY3Rpb24gID0gXy5sYXN0KGFyZ3MpO1xuXG4gIERlYnVnKGFyZ3NbMF0pO1xuXG4gIHJldHVybiB0aGlzLmFkZCguLi5wYXR0ZXJuLCB1bnByb21pc2lmeShhY3Rpb24pKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gYWRkQXN5bmM7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
