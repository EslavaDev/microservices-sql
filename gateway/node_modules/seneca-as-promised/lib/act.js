'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

/**
 * async/act.js
 *
 * @author  Denis Luchkin-Zhou <denis@ricepo.com>
 * @license 2015-16 (C) Ricepo LLC. All Rights Reserved.
 */
const _ = require('lodash');
const Debug = require('debug')('vg:core:act');
const Bluebird = require('bluebird');

function actAsync() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  let cb = _.noop;

  Debug(args[0]);

  /*  */
  if (typeof _.last(args) === 'function') {
    cb = _.last(args);
    args = _.dropRight(args);
  }

  /* Promisify the original act, call it, and pass results back to callback */
  return Bluebird.fromNode(done => this.act.apply(this, _toConsumableArray(args).concat([done]))).nodeify(cb);
}
module.exports = actAsync;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdC5qcyJdLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsIkRlYnVnIiwiQmx1ZWJpcmQiLCJhY3RBc3luYyIsImFyZ3MiLCJjYiIsIm5vb3AiLCJsYXN0IiwiZHJvcFJpZ2h0IiwiZnJvbU5vZGUiLCJkb25lIiwiYWN0Iiwibm9kZWlmeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7O0FBTUEsTUFBTUEsSUFBZUMsUUFBUSxRQUFSLENBQXJCO0FBQ0EsTUFBTUMsUUFBZUQsUUFBUSxPQUFSLEVBQWlCLGFBQWpCLENBQXJCO0FBQ0EsTUFBTUUsV0FBZUYsUUFBUSxVQUFSLENBQXJCOztBQUlBLFNBQVNHLFFBQVQsR0FBMkI7QUFBQSxvQ0FBTkMsSUFBTTtBQUFOQSxRQUFNO0FBQUE7O0FBQ3pCLE1BQUlDLEtBQUtOLEVBQUVPLElBQVg7O0FBRUFMLFFBQU1HLEtBQUssQ0FBTCxDQUFOOztBQUdBO0FBQ0EsTUFBSSxPQUFPTCxFQUFFUSxJQUFGLENBQU9ILElBQVAsQ0FBUCxLQUF3QixVQUE1QixFQUF3QztBQUN0Q0MsU0FBS04sRUFBRVEsSUFBRixDQUFPSCxJQUFQLENBQUw7QUFDQUEsV0FBT0wsRUFBRVMsU0FBRixDQUFZSixJQUFaLENBQVA7QUFDRDs7QUFHRDtBQUNBLFNBQU9GLFNBQ0pPLFFBREksQ0FDS0MsUUFBUSxLQUFLQyxHQUFMLGdDQUFZUCxJQUFaLFVBQWtCTSxJQUFsQixHQURiLEVBRUpFLE9BRkksQ0FFSVAsRUFGSixDQUFQO0FBR0Q7QUFDRFEsT0FBT0MsT0FBUCxHQUFpQlgsUUFBakIiLCJmaWxlIjoiYWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBhc3luYy9hY3QuanNcbiAqXG4gKiBAYXV0aG9yICBEZW5pcyBMdWNoa2luLVpob3UgPGRlbmlzQHJpY2Vwby5jb20+XG4gKiBAbGljZW5zZSAyMDE1LTE2IChDKSBSaWNlcG8gTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICovXG5jb25zdCBfICAgICAgICAgICAgPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IERlYnVnICAgICAgICA9IHJlcXVpcmUoJ2RlYnVnJykoJ3ZnOmNvcmU6YWN0Jyk7XG5jb25zdCBCbHVlYmlyZCAgICAgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuXG5cblxuZnVuY3Rpb24gYWN0QXN5bmMoLi4uYXJncykge1xuICBsZXQgY2IgPSBfLm5vb3A7XG5cbiAgRGVidWcoYXJnc1swXSk7XG5cblxuICAvKiAgKi9cbiAgaWYgKHR5cGVvZiBfLmxhc3QoYXJncykgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IF8ubGFzdChhcmdzKTtcbiAgICBhcmdzID0gXy5kcm9wUmlnaHQoYXJncyk7XG4gIH1cblxuXG4gIC8qIFByb21pc2lmeSB0aGUgb3JpZ2luYWwgYWN0LCBjYWxsIGl0LCBhbmQgcGFzcyByZXN1bHRzIGJhY2sgdG8gY2FsbGJhY2sgKi9cbiAgcmV0dXJuIEJsdWViaXJkXG4gICAgLmZyb21Ob2RlKGRvbmUgPT4gdGhpcy5hY3QoLi4uYXJncywgZG9uZSkpXG4gICAgLm5vZGVpZnkoY2IpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBhY3RBc3luYztcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
